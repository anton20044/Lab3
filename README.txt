1) Профиль нагрузочного тестирования:
Нагрузочное тестирование проводится для определения верхнего предела нагрузки системы.
В состав системы входит:
а) веб сервер (hostname weather24)
б) балансировщик (HAProxy)
в) кластер СУБД (PostgreSQL + Patroni + ETCD)

Профиль нагрузки:
а) Операция №1 - получение списка городов (http://91.185.85.213/Cities)
б) Операция №2 - получение прогноза погоды (http://91.185.85.213/WeatherForecast)

Цели нагрузочного тестирования:
а) Выявление узких мест системы
б) Выявление влияния нагрузки на аппаратные ресурсы
в) Выявление верхнего предела нагрузки, после которого система перестает корректно и быстро (до 150 мс) обрабатывать запросы пользователей
г) Выявление увеличения времени ответа веб сервера при увеличении нагрузки


2) Нагрузочное тестирование проводилось с использованием K6. Тестирование проводилось с применением операции №1 и №2


3) Нефункциональные требования по производительности к системе
- Максимальная задержка ответа 150 мс
- Максимальная нагрузка на аппаратные ресурсы (CPU,RAM) не более 85%

4) Найти максимальную производительность системы
Максимальная производительность системы:
 - 21 успешно обработанный запрос за 1 секунду
 - 216 успешно обработанных запросов за 10 секунд
 - 625 успешно обработанных запросов за 30 секунд
 - 1278 успешно обработанных запросов за 60 секунд


5) Вывод:

а) В качестве узкого места системы выявлен веб сервер.
б) При увеличении нагрузки проявляется деградация системы. Слабым элементом системы является веб сервер. При увеличении нагрузки, близкой к максимальной, появляется увеличение задержки при ответе на запросы пользователей (см график 1). На сервере СУБД и балансировщике запас прочности по ресурсам присутствует.
в) Верхний предел нагрузки составляет 470 запросов за 30 секунд. При этой нагрузке ответы системы укладываются до 150мс (см график 2)
г) При нагрузке свыше 470 запросов за 30 секунд фиксируется увеличение времени ответа веб сервера до 250мс (см график 1)


