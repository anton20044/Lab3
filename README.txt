1) Профиль нагрузочного тестирования:
Нагрузочное тестирование проводится для определения верхнего предела нагрузки системы.
В состав системы входит:
а) веб сервер (hostname weather24)
б) балансировщик (HAProxy)
в) кластер СУБД (PostgreSQL + Patroni + ETCD)

Профиль нагрузки:
а) Операция №1 - получение списка городов (http://91.185.85.213/Cities)
б) Операция №2 - получение прогноза погоды (http://91.185.85.213/WeatherForecast)

Цели нагрузочного тестирования:
Определение максимальной производительности системы, при котором соблюдается требования SLA


2) Нагрузочное тестирование проводилось с использованием K6. Тестирование проводилось с применением операции №1 и №2. Для нагрузки использовалась установка в 1000 виртуальных пользователей.


3) Нефункциональные требования по производительности к системе
- Максимальная задержка ответа 150 мс
- Максимальная нагрузка на аппаратные ресурсы (CPU,RAM) не более 85%
- Количество ошибок под нагрузкой не более 5% от общего числа запросов

4) Найти максимальную производительность системы
Максимальная производительность системы:
- 744939 веб запросов от 1000 виртуальных пользователей в интервале 5 минут.
- 140000 запросов от 300 виртуальных пользователей в интервале 5 минут

5) Вывод:

а) При нагрузке 744939 запросов от 1000 виртуальных пользователей система работает, но фиксируется увеличение отклика 560мс в 95% запросов. Что не удовлетворяет требованиям SLA (График 1)
б) При нагрузке в 140000 запросов от 300 виртуальных пользователей система работает и удовлетворяет требованиям SLA (График 2)
в) В обоих тестах нагрузка на ресурсы виртуальных машин HAProxe, Patroni + PostgreSQL, ETCD удовлетворяет требованиям SLA (График 3)
г) Узким местом при работе системы является POD с приложением, т.к. остальная часть системы имеет запас прочности.

